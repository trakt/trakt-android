<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/MoviesState.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/MoviesState.kt" />
              <option name="originalContent" value="package tv.trakt.trakt.core.movies&#10;&#10;import androidx.compose.runtime.Immutable&#10;&#10;@Immutable&#10;internal data class MoviesState(&#10;    val backgroundUrl: String? = null,&#10;)&#10;" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.movies&#10;&#10;import androidx.compose.runtime.Immutable&#10;import tv.trakt.trakt.common.model.User&#10;&#10;@Immutable&#10;internal data class MoviesState(&#10;    val backgroundUrl: String? = null,&#10;    val user: User? = null,&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/MoviesViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/MoviesViewModel.kt" />
              <option name="originalContent" value="package tv.trakt.trakt.core.movies&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.google.firebase.Firebase&#10;import com.google.firebase.remoteconfig.remoteConfig&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.SharingStarted&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.flow.update&#10;&#10;internal class MoviesViewModel : ViewModel() {&#10;    private val initialState = MoviesState()&#10;&#10;    private val backgroundState = MutableStateFlow(initialState.backgroundUrl)&#10;&#10;    init {&#10;        loadBackground()&#10;    }&#10;&#10;    private fun loadBackground() {&#10;        val configUrl = Firebase.remoteConfig.getString(&quot;mobile_background_image_url&quot;)&#10;        backgroundState.update { configUrl }&#10;    }&#10;&#10;    val state: StateFlow&lt;MoviesState&gt; = combine(&#10;        backgroundState,&#10;    ) { state -&gt;&#10;        MoviesState(&#10;            backgroundUrl = state[0],&#10;        )&#10;    }.stateIn(&#10;        scope = viewModelScope,&#10;        started = SharingStarted.WhileSubscribed(5_000),&#10;        initialValue = initialState,&#10;    )&#10;}&#10;" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.movies&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.google.firebase.Firebase&#10;import com.google.firebase.remoteconfig.remoteConfig&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.SharingStarted&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import tv.trakt.trakt.common.auth.session.SessionManager&#10;&#10;internal class MoviesViewModel(&#10;    private val sessionManager: SessionManager,&#10;) : ViewModel() {&#10;    private val initialState = MoviesState()&#10;&#10;    private val backgroundState = MutableStateFlow(initialState.backgroundUrl)&#10;    private val userState = MutableStateFlow(initialState.user)&#10;&#10;    init {&#10;        loadBackground()&#10;        observeUser()&#10;    }&#10;&#10;    private fun loadBackground() {&#10;        val configUrl = Firebase.remoteConfig.getString(&quot;mobile_background_image_url&quot;)&#10;        backgroundState.update { configUrl }&#10;    }&#10;&#10;    private fun observeUser() {&#10;        viewModelScope.launch {&#10;            sessionManager.observeProfile()&#10;                .collect { user -&gt;&#10;                    userState.update { user }&#10;                }&#10;        }&#10;    }&#10;&#10;    val state: StateFlow&lt;MoviesState&gt; = combine(&#10;        backgroundState,&#10;        userState,&#10;    ) { s1, s2 -&gt;&#10;        MoviesState(&#10;            backgroundUrl = s1,&#10;            user = s2,&#10;        )&#10;    }.stateIn(&#10;        scope = viewModelScope,&#10;        started = SharingStarted.WhileSubscribed(5_000),&#10;        initialValue = initialState,&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/sections/recommended/MoviesRecommendedState.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/sections/recommended/MoviesRecommendedState.kt" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.movies.sections.recommended&#10;&#10;import androidx.compose.runtime.Immutable&#10;import kotlinx.collections.immutable.ImmutableList&#10;import tv.trakt.trakt.common.helpers.LoadingState&#10;import tv.trakt.trakt.core.movies.model.RecommendedMovie&#10;&#10;@Immutable&#10;internal data class MoviesRecommendedState(&#10;    val items: ImmutableList&lt;RecommendedMovie&gt;? = null,&#10;    val loading: LoadingState = LoadingState.IDLE,&#10;    val error: Exception? = null,&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/sections/recommended/MoviesRecommendedView.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/sections/recommended/MoviesRecommendedView.kt" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.movies.sections.recommended&#10;&#10;import androidx.compose.animation.Crossfade&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Arrangement.spacedBy&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.PaddingValues&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.LazyRow&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.alpha&#10;import androidx.compose.ui.res.stringResource&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.lifecycle.compose.collectAsStateWithLifecycle&#10;import kotlinx.collections.immutable.ImmutableList&#10;import kotlinx.collections.immutable.toImmutableList&#10;import org.koin.androidx.compose.koinViewModel&#10;import tv.trakt.trakt.common.R&#10;import tv.trakt.trakt.common.helpers.LoadingState.DONE&#10;import tv.trakt.trakt.common.helpers.LoadingState.IDLE&#10;import tv.trakt.trakt.common.helpers.LoadingState.LOADING&#10;import tv.trakt.trakt.core.movies.model.RecommendedMovie&#10;import tv.trakt.trakt.ui.components.InfoChip&#10;import tv.trakt.trakt.ui.components.mediacards.VerticalMediaCard&#10;import tv.trakt.trakt.ui.components.mediacards.skeletons.VerticalMediaSkeletonCard&#10;import tv.trakt.trakt.ui.theme.TraktTheme&#10;&#10;@Composable&#10;internal fun MoviesRecommendedView(&#10;    modifier: Modifier = Modifier,&#10;    viewModel: MoviesRecommendedViewModel = koinViewModel(),&#10;    headerPadding: PaddingValues,&#10;    contentPadding: PaddingValues,&#10;) {&#10;    val state by viewModel.state.collectAsStateWithLifecycle()&#10;&#10;    MoviesRecommendedContent(&#10;        state = state,&#10;        modifier = modifier,&#10;        headerPadding = headerPadding,&#10;        contentPadding = contentPadding,&#10;    )&#10;}&#10;&#10;@Composable&#10;internal fun MoviesRecommendedContent(&#10;    state: MoviesRecommendedState,&#10;    modifier: Modifier = Modifier,&#10;    headerPadding: PaddingValues = PaddingValues(),&#10;    contentPadding: PaddingValues = PaddingValues(),&#10;) {&#10;    Column(&#10;        verticalArrangement = spacedBy(TraktTheme.spacing.mainRowHeaderSpace),&#10;        modifier = modifier,&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(headerPadding),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically,&#10;        ) {&#10;            Text(&#10;                text = stringResource(R.string.header_recommended),&#10;                color = TraktTheme.colors.textPrimary,&#10;                style = TraktTheme.typography.heading5,&#10;            )&#10;            Text(&#10;                text = stringResource(R.string.view_all).uppercase(),&#10;                color = TraktTheme.colors.textSecondary,&#10;                style = TraktTheme.typography.buttonTertiary,&#10;            )&#10;        }&#10;&#10;        Crossfade(&#10;            targetState = state.loading,&#10;            animationSpec = tween(200),&#10;        ) { loading -&gt;&#10;            when (loading) {&#10;                IDLE, LOADING -&gt; {&#10;                    ContentLoadingList(&#10;                        visible = loading.isLoading,&#10;                        contentPadding = contentPadding,&#10;                    )&#10;                }&#10;                DONE -&gt; {&#10;                    ContentList(&#10;                        listItems = { state.items ?: emptyList&lt;RecommendedMovie&gt;().toImmutableList() },&#10;                        contentPadding = contentPadding,&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ContentLoadingList(&#10;    visible: Boolean = true,&#10;    contentPadding: PaddingValues,&#10;) {&#10;    LazyRow(&#10;        horizontalArrangement = spacedBy(TraktTheme.spacing.mainRowSpace),&#10;        contentPadding = contentPadding,&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .alpha(if (visible) 1F else 0F),&#10;    ) {&#10;        items(count = 6) {&#10;            VerticalMediaSkeletonCard()&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ContentList(&#10;    listItems: () -&gt; ImmutableList&lt;RecommendedMovie&gt;,&#10;    contentPadding: PaddingValues,&#10;) {&#10;    LazyRow(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = spacedBy(TraktTheme.spacing.mainRowSpace),&#10;        contentPadding = contentPadding,&#10;    ) {&#10;        items(&#10;            items = listItems(),&#10;            key = { it.movie.ids.trakt.value },&#10;        ) { item -&gt;&#10;            ContentListItem(&#10;                item = item,&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ContentListItem(&#10;    item: RecommendedMovie,&#10;    onClick: () -&gt; Unit = {},&#10;) {&#10;    VerticalMediaCard(&#10;        title = item.movie.title,&#10;        imageUrl = item.movie.images?.getPosterUrl(),&#10;        onClick = onClick,&#10;        chipContent = {&#10;            InfoChip(&#10;                text = stringResource(R.string.recommended_for_you),&#10;            )&#10;        },&#10;    )&#10;}&#10;&#10;@Preview(&#10;    device = &quot;id:pixel_5&quot;,&#10;    showBackground = true,&#10;    backgroundColor = 0xFF131517,&#10;)&#10;@Composable&#10;private fun Preview() {&#10;    TraktTheme {&#10;        MoviesRecommendedContent(&#10;            state = MoviesRecommendedState(&#10;                loading = IDLE,&#10;            ),&#10;        )&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/sections/recommended/MoviesRecommendedViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/sections/recommended/MoviesRecommendedViewModel.kt" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.movies.sections.recommended&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import kotlinx.coroutines.delay&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.SharingStarted&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import timber.log.Timber&#10;import tv.trakt.trakt.common.helpers.LoadingState.DONE&#10;import tv.trakt.trakt.common.helpers.LoadingState.LOADING&#10;import tv.trakt.trakt.common.helpers.extensions.rethrowCancellation&#10;import tv.trakt.trakt.core.movies.sections.recommended.usecase.GetRecommendedMoviesUseCase&#10;&#10;internal class MoviesRecommendedViewModel(&#10;    private val getRecommendedUseCase: GetRecommendedMoviesUseCase,&#10;) : ViewModel() {&#10;    private val initialState = MoviesRecommendedState()&#10;&#10;    private val itemsState = MutableStateFlow(initialState.items)&#10;    private val loadingState = MutableStateFlow(initialState.loading)&#10;    private val errorState = MutableStateFlow(initialState.error)&#10;&#10;    init {&#10;        loadData()&#10;    }&#10;&#10;    private fun loadData() {&#10;        viewModelScope.launch {&#10;            val loadingJob = launch {&#10;                delay(250)&#10;                loadingState.update { LOADING }&#10;            }&#10;            try {&#10;                val movies = getRecommendedUseCase.getRecommendedMovies()&#10;                itemsState.update { movies }&#10;            } catch (error: Exception) {&#10;                error.rethrowCancellation {&#10;                    errorState.update { error }&#10;                    Timber.e(error, &quot;Failed to load recommended movies&quot;)&#10;                }&#10;            } finally {&#10;                loadingJob.cancel()&#10;                loadingState.update { DONE }&#10;            }&#10;        }&#10;    }&#10;&#10;    fun refresh() {&#10;        loadData()&#10;    }&#10;&#10;    val state: StateFlow&lt;MoviesRecommendedState&gt; = combine(&#10;        itemsState,&#10;        loadingState,&#10;        errorState,&#10;    ) { s1, s2, s3 -&gt;&#10;        MoviesRecommendedState(&#10;            items = s1,&#10;            loading = s2,&#10;            error = s3,&#10;        )&#10;    }.stateIn(&#10;        scope = viewModelScope,&#10;        started = SharingStarted.WhileSubscribed(5_000),&#10;        initialValue = initialState,&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/sections/recommended/usecase/GetRecommendedMoviesUseCase.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/movies/sections/recommended/usecase/GetRecommendedMoviesUseCase.kt" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.movies.sections.recommended.usecase&#10;&#10;import kotlinx.collections.immutable.ImmutableList&#10;import kotlinx.collections.immutable.toImmutableList&#10;import tv.trakt.trakt.core.movies.model.RecommendedMovie&#10;&#10;internal class GetRecommendedMoviesUseCase {&#10;    &#10;    suspend fun getRecommendedMovies(): ImmutableList&lt;RecommendedMovie&gt; {&#10;        // TODO: Implement actual recommendation logic&#10;        // This would typically fetch from a repository or API&#10;        return emptyList&lt;RecommendedMovie&gt;().toImmutableList()&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/profile/ProfileViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/profile/ProfileViewModel.kt" />
              <option name="originalContent" value="package tv.trakt.trakt.core.profile&#10;&#10;import androidx.datastore.core.DataStore&#10;import androidx.datastore.preferences.core.Preferences&#10;import androidx.datastore.preferences.core.edit&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.google.firebase.Firebase&#10;import com.google.firebase.remoteconfig.remoteConfig&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.SharingStarted&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import timber.log.Timber&#10;import tv.trakt.trakt.common.auth.session.SessionManager&#10;import tv.trakt.trakt.common.helpers.LoadingState&#10;import tv.trakt.trakt.common.helpers.LoadingState.LOADING&#10;import tv.trakt.trakt.common.helpers.extensions.rethrowCancellation&#10;import tv.trakt.trakt.core.auth.usecase.AuthorizeUserUseCase&#10;import tv.trakt.trakt.core.auth.usecase.authCodeKey&#10;import tv.trakt.trakt.core.profile.usecase.GetUserProfileUseCase&#10;import tv.trakt.trakt.core.profile.usecase.LogoutUserUseCase&#10;&#10;internal class ProfileViewModel(&#10;    private val sessionManager: SessionManager,&#10;    private val authorizePreferences: DataStore&lt;Preferences&gt;,&#10;    private val authorizeUseCase: AuthorizeUserUseCase,&#10;    private val getProfileUseCase: GetUserProfileUseCase,&#10;    private val logoutUseCase: LogoutUserUseCase,&#10;) : ViewModel() {&#10;    private val initialState = ProfileState()&#10;&#10;    private val backgroundState = MutableStateFlow(initialState.backgroundUrl)&#10;    private val loadingState = MutableStateFlow(initialState.loading)&#10;    private val signedInState = MutableStateFlow(initialState.isSignedIn)&#10;&#10;    init {&#10;        loadBackground()&#10;        observeProfile()&#10;        observeAuthCode()&#10;    }&#10;&#10;    private fun observeAuthCode() {&#10;        viewModelScope.launch {&#10;            authorizePreferences.data.collect { preferences -&gt;&#10;                preferences[authCodeKey]?.let { code -&gt;&#10;                    authorizePreferences.edit { it.remove(authCodeKey) }&#10;                    authorizeUser(code)&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    private fun observeProfile() {&#10;        viewModelScope.launch {&#10;            sessionManager.observeProfile()&#10;                .collect { profile -&gt;&#10;                    val isSignedOut = (profile == null)&#10;//                        &amp;&amp; profileState.value != null&#10;//                    profileState.update { profile }&#10;                    signedInState.update { !isSignedOut }&#10;                }&#10;        }&#10;    }&#10;&#10;    private fun loadBackground() {&#10;        val configUrl = Firebase.remoteConfig.getString(&quot;mobile_background_image_url&quot;)&#10;        backgroundState.update { configUrl }&#10;    }&#10;&#10;    private fun authorizeUser(code: String) {&#10;        viewModelScope.launch {&#10;            try {&#10;                loadingState.update { LOADING }&#10;&#10;                authorizeUseCase.authorizeByCode(code)&#10;                getProfileUseCase.loadUserProfile()&#10;            } catch (error: Exception) {&#10;                error.rethrowCancellation {&#10;                    Timber.e(error)&#10;                }&#10;            } finally {&#10;                loadingState.update { LoadingState.IDLE }&#10;            }&#10;        }&#10;    }&#10;&#10;    fun logoutUser() {&#10;        viewModelScope.launch {&#10;            try {&#10;                logoutUseCase.logoutUser()&#10;            } catch (error: Exception) {&#10;                error.rethrowCancellation {&#10;                    Timber.e(error)&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    val state: StateFlow&lt;ProfileState&gt; = combine(&#10;        backgroundState,&#10;        loadingState,&#10;        signedInState,&#10;    ) { s1, s2, s3 -&gt;&#10;        ProfileState(&#10;            backgroundUrl = s1,&#10;            loading = s2,&#10;            isSignedIn = s3,&#10;        )&#10;    }.stateIn(&#10;        scope = viewModelScope,&#10;        started = SharingStarted.WhileSubscribed(5_000),&#10;        initialValue = initialState,&#10;    )&#10;}&#10;" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.profile&#10;&#10;import androidx.datastore.core.DataStore&#10;import androidx.datastore.preferences.core.Preferences&#10;import androidx.datastore.preferences.core.edit&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.google.firebase.Firebase&#10;import com.google.firebase.remoteconfig.remoteConfig&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.SharingStarted&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import timber.log.Timber&#10;import tv.trakt.trakt.common.auth.session.SessionManager&#10;import tv.trakt.trakt.common.helpers.LoadingState&#10;import tv.trakt.trakt.common.helpers.LoadingState.LOADING&#10;import tv.trakt.trakt.common.helpers.extensions.rethrowCancellation&#10;import tv.trakt.trakt.core.auth.usecase.AuthorizeUserUseCase&#10;import tv.trakt.trakt.core.auth.usecase.authCodeKey&#10;import tv.trakt.trakt.core.profile.usecase.GetUserProfileUseCase&#10;import tv.trakt.trakt.core.profile.usecase.LogoutUserUseCase&#10;&#10;internal class ProfileViewModel(&#10;    private val sessionManager: SessionManager,&#10;    private val authorizePreferences: DataStore&lt;Preferences&gt;,&#10;    private val authorizeUseCase: AuthorizeUserUseCase,&#10;    private val getProfileUseCase: GetUserProfileUseCase,&#10;    private val logoutUseCase: LogoutUserUseCase,&#10;) : ViewModel() {&#10;    private val initialState = ProfileState()&#10;&#10;    private val backgroundState = MutableStateFlow(initialState.backgroundUrl)&#10;    private val loadingState = MutableStateFlow(initialState.loading)&#10;    private val profileState = MutableStateFlow(initialState.profile)&#10;    private val signedInState = MutableStateFlow(initialState.isSignedIn)&#10;&#10;    init {&#10;        loadBackground()&#10;        observeProfile()&#10;        observeAuthCode()&#10;    }&#10;&#10;    private fun observeAuthCode() {&#10;        viewModelScope.launch {&#10;            authorizePreferences.data.collect { preferences -&gt;&#10;                preferences[authCodeKey]?.let { code -&gt;&#10;                    authorizePreferences.edit { it.remove(authCodeKey) }&#10;                    authorizeUser(code)&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    private fun observeProfile() {&#10;        viewModelScope.launch {&#10;            sessionManager.observeProfile()&#10;                .collect { profile -&gt;&#10;                    val isSignedOut = (profile == null)&#10;                    profileState.update { profile }&#10;                    signedInState.update { !isSignedOut }&#10;                }&#10;        }&#10;    }&#10;&#10;    private fun loadBackground() {&#10;        val configUrl = Firebase.remoteConfig.getString(&quot;mobile_background_image_url&quot;)&#10;        backgroundState.update { configUrl }&#10;    }&#10;&#10;    private fun authorizeUser(code: String) {&#10;        viewModelScope.launch {&#10;            try {&#10;                loadingState.update { LOADING }&#10;&#10;                authorizeUseCase.authorizeByCode(code)&#10;                getProfileUseCase.loadUserProfile()&#10;            } catch (error: Exception) {&#10;                error.rethrowCancellation {&#10;                    Timber.e(error)&#10;                }&#10;            } finally {&#10;                loadingState.update { LoadingState.IDLE }&#10;            }&#10;        }&#10;    }&#10;&#10;    fun logoutUser() {&#10;        viewModelScope.launch {&#10;            try {&#10;                logoutUseCase.logoutUser()&#10;            } catch (error: Exception) {&#10;                error.rethrowCancellation {&#10;                    Timber.e(error)&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    val state: StateFlow&lt;ProfileState&gt; = combine(&#10;        backgroundState,&#10;        loadingState,&#10;        profileState,&#10;        signedInState,&#10;    ) { s1, s2, s3, s4 -&gt;&#10;        ProfileState(&#10;            backgroundUrl = s1,&#10;            loading = s2,&#10;            profile = s3,&#10;            isSignedIn = s4,&#10;        )&#10;    }.stateIn(&#10;        scope = viewModelScope,&#10;        started = SharingStarted.WhileSubscribed(5_000),&#10;        initialValue = initialState,&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/ShowsViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/ShowsViewModel.kt" />
              <option name="originalContent" value="package tv.trakt.trakt.core.shows&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.google.firebase.Firebase&#10;import com.google.firebase.remoteconfig.remoteConfig&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.SharingStarted&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.flow.update&#10;&#10;internal class ShowsViewModel : ViewModel() {&#10;    private val initialState = ShowsState()&#10;&#10;    private val backgroundState = MutableStateFlow(initialState.backgroundUrl)&#10;&#10;    init {&#10;        loadBackground()&#10;    }&#10;&#10;    private fun loadBackground() {&#10;        val configUrl = Firebase.remoteConfig.getString(&quot;mobile_background_image_url&quot;)&#10;        backgroundState.update { configUrl }&#10;    }&#10;&#10;    val state: StateFlow&lt;ShowsState&gt; = combine(&#10;        backgroundState,&#10;    ) { state -&gt;&#10;        ShowsState(&#10;            backgroundUrl = state[0],&#10;        )&#10;    }.stateIn(&#10;        scope = viewModelScope,&#10;        started = SharingStarted.WhileSubscribed(5_000),&#10;        initialValue = initialState,&#10;    )&#10;}&#10;" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.shows&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.google.firebase.Firebase&#10;import com.google.firebase.remoteconfig.remoteConfig&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.SharingStarted&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import tv.trakt.trakt.common.auth.session.SessionManager&#10;&#10;internal class ShowsViewModel(&#10;    private val sessionManager: SessionManager,&#10;) : ViewModel() {&#10;    private val initialState = ShowsState()&#10;&#10;    private val backgroundState = MutableStateFlow(initialState.backgroundUrl)&#10;    private val userState = MutableStateFlow(initialState.user)&#10;&#10;    init {&#10;        loadBackground()&#10;        observeUser()&#10;    }&#10;&#10;    private fun loadBackground() {&#10;        val configUrl = Firebase.remoteConfig.getString(&quot;mobile_background_image_url&quot;)&#10;        backgroundState.update { configUrl }&#10;    }&#10;&#10;    private fun observeUser() {&#10;        viewModelScope.launch {&#10;            sessionManager.observeProfile()&#10;                .collect { user -&gt;&#10;                    userState.update { user }&#10;                }&#10;        }&#10;    }&#10;&#10;    val state: StateFlow&lt;ShowsState&gt; = combine(&#10;        backgroundState,&#10;        userState,&#10;    ) { s1, s2 -&gt;&#10;        ShowsState(&#10;            backgroundUrl = s1,&#10;            user = s2,&#10;        )&#10;    }.stateIn(&#10;        scope = viewModelScope,&#10;        started = SharingStarted.WhileSubscribed(5_000),&#10;        initialValue = initialState,&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/di/ShowsModule.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/di/ShowsModule.kt" />
              <option name="originalContent" value="package tv.trakt.trakt.core.shows.di&#10;&#10;import org.koin.core.module.dsl.viewModel&#10;import org.koin.core.qualifier.named&#10;import org.koin.dsl.module&#10;import org.openapitools.client.apis.RecommendationsApi&#10;import org.openapitools.client.apis.ShowsApi&#10;import tv.trakt.trakt.common.Config.API_BASE_URL&#10;import tv.trakt.trakt.core.shows.ShowsViewModel&#10;import tv.trakt.trakt.core.shows.data.remote.ShowsApiClient&#10;import tv.trakt.trakt.core.shows.data.remote.ShowsRemoteDataSource&#10;import tv.trakt.trakt.core.shows.sections.anticipated.ShowsAnticipatedViewModel&#10;import tv.trakt.trakt.core.shows.sections.anticipated.usecase.GetAnticipatedShowsUseCase&#10;import tv.trakt.trakt.core.shows.sections.hot.ShowsHotViewModel&#10;import tv.trakt.trakt.core.shows.sections.hot.usecase.GetHotShowsUseCase&#10;import tv.trakt.trakt.core.shows.sections.popular.ShowsPopularViewModel&#10;import tv.trakt.trakt.core.shows.sections.popular.usecase.GetPopularShowsUseCase&#10;import tv.trakt.trakt.core.shows.sections.trending.ShowsTrendingViewModel&#10;import tv.trakt.trakt.core.shows.sections.trending.usecase.GetTrendingShowsUseCase&#10;&#10;internal val showsDataModule = module {&#10;&#10;    single&lt;ShowsRemoteDataSource&gt; {&#10;        ShowsApiClient(&#10;            showsApi = ShowsApi(&#10;                baseUrl = API_BASE_URL,&#10;                httpClientEngine = get(),&#10;                httpClientConfig = get(named(&quot;clientConfig&quot;)),&#10;            ),&#10;            recommendationsApi = RecommendationsApi(&#10;                baseUrl = API_BASE_URL,&#10;                httpClientEngine = get(),&#10;                httpClientConfig = get(named(&quot;authorizedClientConfig&quot;)),&#10;            ),&#10;        )&#10;    }&#10;}&#10;&#10;internal val showsModule = module {&#10;    factory {&#10;        GetTrendingShowsUseCase(&#10;            remoteSource = get(),&#10;        )&#10;    }&#10;&#10;    factory {&#10;        GetHotShowsUseCase(&#10;            remoteSource = get(),&#10;        )&#10;    }&#10;&#10;    factory {&#10;        GetPopularShowsUseCase(&#10;            remoteSource = get(),&#10;        )&#10;    }&#10;&#10;    factory {&#10;        GetAnticipatedShowsUseCase(&#10;            remoteSource = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsViewModel(&#10;            sessionManager = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsTrendingViewModel(&#10;            getTrendingUseCase = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsHotViewModel(&#10;            getHotUseCase = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsAnticipatedViewModel(&#10;            getAnticipatedUseCase = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsPopularViewModel(&#10;            getPopularUseCase = get(),&#10;        )&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.shows.di&#10;&#10;import org.koin.core.module.dsl.viewModel&#10;import org.koin.core.qualifier.named&#10;import org.koin.dsl.module&#10;import org.openapitools.client.apis.RecommendationsApi&#10;import org.openapitools.client.apis.ShowsApi&#10;import tv.trakt.trakt.common.Config.API_BASE_URL&#10;import tv.trakt.trakt.core.shows.ShowsViewModel&#10;import tv.trakt.trakt.core.shows.data.remote.ShowsApiClient&#10;import tv.trakt.trakt.core.shows.data.remote.ShowsRemoteDataSource&#10;import tv.trakt.trakt.core.shows.sections.anticipated.ShowsAnticipatedViewModel&#10;import tv.trakt.trakt.core.shows.sections.anticipated.usecase.GetAnticipatedShowsUseCase&#10;import tv.trakt.trakt.core.shows.sections.hot.ShowsHotViewModel&#10;import tv.trakt.trakt.core.shows.sections.hot.usecase.GetHotShowsUseCase&#10;import tv.trakt.trakt.core.shows.sections.popular.ShowsPopularViewModel&#10;import tv.trakt.trakt.core.shows.sections.popular.usecase.GetPopularShowsUseCase&#10;import tv.trakt.trakt.core.shows.sections.recommended.ShowsRecommendedViewModel&#10;import tv.trakt.trakt.core.shows.sections.recommended.usecase.GetRecommendedShowsUseCase&#10;import tv.trakt.trakt.core.shows.sections.trending.ShowsTrendingViewModel&#10;import tv.trakt.trakt.core.shows.sections.trending.usecase.GetTrendingShowsUseCase&#10;&#10;internal val showsDataModule = module {&#10;&#10;    single&lt;ShowsRemoteDataSource&gt; {&#10;        ShowsApiClient(&#10;            showsApi = ShowsApi(&#10;                baseUrl = API_BASE_URL,&#10;                httpClientEngine = get(),&#10;                httpClientConfig = get(named(&quot;clientConfig&quot;)),&#10;            ),&#10;            recommendationsApi = RecommendationsApi(&#10;                baseUrl = API_BASE_URL,&#10;                httpClientEngine = get(),&#10;                httpClientConfig = get(named(&quot;authorizedClientConfig&quot;)),&#10;            ),&#10;        )&#10;    }&#10;}&#10;&#10;internal val showsModule = module {&#10;    factory {&#10;        GetTrendingShowsUseCase(&#10;            remoteSource = get(),&#10;        )&#10;    }&#10;&#10;    factory {&#10;        GetHotShowsUseCase(&#10;            remoteSource = get(),&#10;        )&#10;    }&#10;&#10;    factory {&#10;        GetPopularShowsUseCase(&#10;            remoteSource = get(),&#10;        )&#10;    }&#10;&#10;    factory {&#10;        GetAnticipatedShowsUseCase(&#10;            remoteSource = get(),&#10;        )&#10;    }&#10;&#10;    factory {&#10;        GetRecommendedShowsUseCase()&#10;    }&#10;&#10;    viewModel {&#10;        ShowsViewModel(&#10;            sessionManager = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsTrendingViewModel(&#10;            getTrendingUseCase = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsHotViewModel(&#10;            getHotUseCase = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsAnticipatedViewModel(&#10;            getAnticipatedUseCase = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsRecommendedViewModel(&#10;            getRecommendedUseCase = get(),&#10;        )&#10;    }&#10;&#10;    viewModel {&#10;        ShowsPopularViewModel(&#10;            getPopularUseCase = get(),&#10;        )&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/sections/recommended/ShowsRecommendedState.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/sections/recommended/ShowsRecommendedState.kt" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.shows.sections.recommended&#10;&#10;import androidx.compose.runtime.Immutable&#10;import kotlinx.collections.immutable.ImmutableList&#10;import tv.trakt.trakt.common.helpers.LoadingState&#10;import tv.trakt.trakt.core.shows.model.RecommendedShow&#10;&#10;@Immutable&#10;internal data class ShowsRecommendedState(&#10;    val items: ImmutableList&lt;RecommendedShow&gt;? = null,&#10;    val loading: LoadingState = LoadingState.IDLE,&#10;    val error: Exception? = null,&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/sections/recommended/ShowsRecommendedView.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/sections/recommended/ShowsRecommendedView.kt" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.shows.sections.recommended&#10;&#10;import androidx.compose.animation.Crossfade&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Arrangement.spacedBy&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.PaddingValues&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.LazyRow&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.alpha&#10;import androidx.compose.ui.res.stringResource&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.lifecycle.compose.collectAsStateWithLifecycle&#10;import kotlinx.collections.immutable.ImmutableList&#10;import kotlinx.collections.immutable.toImmutableList&#10;import org.koin.androidx.compose.koinViewModel&#10;import tv.trakt.trakt.common.R&#10;import tv.trakt.trakt.common.helpers.LoadingState.DONE&#10;import tv.trakt.trakt.common.helpers.LoadingState.IDLE&#10;import tv.trakt.trakt.common.helpers.LoadingState.LOADING&#10;import tv.trakt.trakt.core.shows.model.RecommendedShow&#10;import tv.trakt.trakt.ui.components.InfoChip&#10;import tv.trakt.trakt.ui.components.mediacards.VerticalMediaCard&#10;import tv.trakt.trakt.ui.components.mediacards.skeletons.VerticalMediaSkeletonCard&#10;import tv.trakt.trakt.ui.theme.TraktTheme&#10;&#10;@Composable&#10;internal fun ShowsRecommendedView(&#10;    modifier: Modifier = Modifier,&#10;    viewModel: ShowsRecommendedViewModel = koinViewModel(),&#10;    headerPadding: PaddingValues,&#10;    contentPadding: PaddingValues,&#10;) {&#10;    val state by viewModel.state.collectAsStateWithLifecycle()&#10;&#10;    ShowsRecommendedContent(&#10;        state = state,&#10;        modifier = modifier,&#10;        headerPadding = headerPadding,&#10;        contentPadding = contentPadding,&#10;    )&#10;}&#10;&#10;@Composable&#10;internal fun ShowsRecommendedContent(&#10;    state: ShowsRecommendedState,&#10;    modifier: Modifier = Modifier,&#10;    headerPadding: PaddingValues = PaddingValues(),&#10;    contentPadding: PaddingValues = PaddingValues(),&#10;) {&#10;    Column(&#10;        verticalArrangement = spacedBy(TraktTheme.spacing.mainRowHeaderSpace),&#10;        modifier = modifier,&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(headerPadding),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically,&#10;        ) {&#10;            Text(&#10;                text = stringResource(R.string.header_recommended),&#10;                color = TraktTheme.colors.textPrimary,&#10;                style = TraktTheme.typography.heading5,&#10;            )&#10;            Text(&#10;                text = stringResource(R.string.view_all).uppercase(),&#10;                color = TraktTheme.colors.textSecondary,&#10;                style = TraktTheme.typography.buttonTertiary,&#10;            )&#10;        }&#10;&#10;        Crossfade(&#10;            targetState = state.loading,&#10;            animationSpec = tween(200),&#10;        ) { loading -&gt;&#10;            when (loading) {&#10;                IDLE, LOADING -&gt; {&#10;                    ContentLoadingList(&#10;                        visible = loading.isLoading,&#10;                        contentPadding = contentPadding,&#10;                    )&#10;                }&#10;                DONE -&gt; {&#10;                    ContentList(&#10;                        listItems = { state.items ?: emptyList&lt;RecommendedShow&gt;().toImmutableList() },&#10;                        contentPadding = contentPadding,&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ContentLoadingList(&#10;    visible: Boolean = true,&#10;    contentPadding: PaddingValues,&#10;) {&#10;    LazyRow(&#10;        horizontalArrangement = spacedBy(TraktTheme.spacing.mainRowSpace),&#10;        contentPadding = contentPadding,&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .alpha(if (visible) 1F else 0F),&#10;    ) {&#10;        items(count = 6) {&#10;            VerticalMediaSkeletonCard()&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ContentList(&#10;    listItems: () -&gt; ImmutableList&lt;RecommendedShow&gt;,&#10;    contentPadding: PaddingValues,&#10;) {&#10;    LazyRow(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = spacedBy(TraktTheme.spacing.mainRowSpace),&#10;        contentPadding = contentPadding,&#10;    ) {&#10;        items(&#10;            items = listItems(),&#10;            key = { it.show.ids.trakt.value },&#10;        ) { item -&gt;&#10;            ContentListItem(&#10;                item = item,&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ContentListItem(&#10;    item: RecommendedShow,&#10;    onClick: () -&gt; Unit = {},&#10;) {&#10;    VerticalMediaCard(&#10;        title = item.show.title,&#10;        imageUrl = item.show.images?.getPosterUrl(),&#10;        onClick = onClick,&#10;        chipContent = {&#10;            InfoChip(&#10;                text = stringResource(R.string.recommended_for_you),&#10;            )&#10;        },&#10;    )&#10;}&#10;&#10;@Preview(&#10;    device = &quot;id:pixel_5&quot;,&#10;    showBackground = true,&#10;    backgroundColor = 0xFF131517,&#10;)&#10;@Composable&#10;private fun Preview() {&#10;    TraktTheme {&#10;        ShowsRecommendedContent(&#10;            state = ShowsRecommendedState(&#10;                loading = IDLE,&#10;            ),&#10;        )&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/sections/recommended/ShowsRecommendedViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/sections/recommended/ShowsRecommendedViewModel.kt" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.shows.sections.recommended&#10;&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import kotlinx.coroutines.delay&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.SharingStarted&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.combine&#10;import kotlinx.coroutines.flow.stateIn&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;import timber.log.Timber&#10;import tv.trakt.trakt.common.helpers.LoadingState.DONE&#10;import tv.trakt.trakt.common.helpers.LoadingState.LOADING&#10;import tv.trakt.trakt.common.helpers.extensions.rethrowCancellation&#10;import tv.trakt.trakt.core.shows.sections.recommended.usecase.GetRecommendedShowsUseCase&#10;&#10;internal class ShowsRecommendedViewModel(&#10;    private val getRecommendedUseCase: GetRecommendedShowsUseCase,&#10;) : ViewModel() {&#10;    private val initialState = ShowsRecommendedState()&#10;&#10;    private val itemsState = MutableStateFlow(initialState.items)&#10;    private val loadingState = MutableStateFlow(initialState.loading)&#10;    private val errorState = MutableStateFlow(initialState.error)&#10;&#10;    init {&#10;        loadData()&#10;    }&#10;&#10;    private fun loadData() {&#10;        viewModelScope.launch {&#10;            val loadingJob = launch {&#10;                delay(250)&#10;                loadingState.update { LOADING }&#10;            }&#10;            try {&#10;                val shows = getRecommendedUseCase.getRecommendedShows()&#10;                itemsState.update { shows }&#10;            } catch (error: Exception) {&#10;                error.rethrowCancellation {&#10;                    errorState.update { error }&#10;                    Timber.e(error, &quot;Failed to load recommended shows&quot;)&#10;                }&#10;            } finally {&#10;                loadingJob.cancel()&#10;                loadingState.update { DONE }&#10;            }&#10;        }&#10;    }&#10;&#10;    fun refresh() {&#10;        loadData()&#10;    }&#10;&#10;    val state: StateFlow&lt;ShowsRecommendedState&gt; = combine(&#10;        itemsState,&#10;        loadingState,&#10;        errorState,&#10;    ) { s1, s2, s3 -&gt;&#10;        ShowsRecommendedState(&#10;            items = s1,&#10;            loading = s2,&#10;            error = s3,&#10;        )&#10;    }.stateIn(&#10;        scope = viewModelScope,&#10;        started = SharingStarted.WhileSubscribed(5_000),&#10;        initialValue = initialState,&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/sections/recommended/usecase/GetRecommendedShowsUseCase.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/tv/trakt/trakt/core/shows/sections/recommended/usecase/GetRecommendedShowsUseCase.kt" />
              <option name="originalContent" value="package tv.trakt.trakt.core.shows.sections.recommended.usecase&#10;&#10;import kotlinx.collections.immutable.ImmutableList&#10;import kotlinx.collections.immutable.toImmutableList&#10;import tv.trakt.trakt.common.helpers.extensions.asyncMap&#10;import tv.trakt.trakt.common.model.Show&#10;import tv.trakt.trakt.common.model.fromDto&#10;import tv.trakt.trakt.core.shows.data.remote.ShowsRemoteDataSource&#10;&#10;internal class GetRecommendedShowsUseCase(&#10;    private val remoteSource: ShowsRemoteDataSource,&#10;) {&#10;    suspend fun getRecommendedShows(): ImmutableList&lt;Show&gt; {&#10;        return remoteSource.getRecommended(20)&#10;            .asyncMap {&#10;                Show.fromDto(it)&#10;            }&#10;            .toImmutableList()&#10;            .also { shows -&gt;&#10;                // TODO&#10;            }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package tv.trakt.trakt.core.shows.sections.recommended.usecase&#10;&#10;import kotlinx.collections.immutable.ImmutableList&#10;import kotlinx.collections.immutable.toImmutableList&#10;import tv.trakt.trakt.common.helpers.extensions.asyncMap&#10;import tv.trakt.trakt.common.model.Show&#10;import tv.trakt.trakt.common.model.fromDto&#10;import tv.trakt.trakt.core.shows.data.remote.ShowsRemoteDataSource&#10;&#10;internal class GetRecommendedShowsUseCase(&#10;    private val remoteSource: ShowsRemoteDataSource,&#10;) {&#10;    suspend fun getRecommendedShows(): ImmutableList&lt;Show&gt; {&#10;        return remoteSource.getRecommended(20)&#10;            .asyncMap {&#10;                Show.fromDto(it)&#10;            }&#10;            .toImmutableList()&#10;            .also { shows -&gt;&#10;                // TODO&#10;            }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/tv/src/main/java/tv/trakt/trakt/app/core/home/sections/recommended/HomeRecommendedViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/tv/src/main/java/tv/trakt/trakt/app/core/home/sections/recommended/HomeRecommendedViewModel.kt" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/tv/src/main/java/tv/trakt/trakt/app/core/home/sections/recommended/usecases/GetRecommendedUseCase.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/tv/src/main/java/tv/trakt/trakt/app/core/home/sections/recommended/usecases/GetRecommendedUseCase.kt" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/tv/src/main/res/drawable/ic_plus.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/tv/src/main/res/drawable/ic_plus.xml" />
              <option name="originalContent" value="&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&#10;    &gt;&#10;    &lt;path&#10;        android:fillColor=&quot;#00000000&quot;&#10;        android:pathData=&quot;M12,3L12,21&quot;&#10;        android:strokeWidth=&quot;2&quot;&#10;        android:strokeColor=&quot;#FEFEFE&quot;&#10;        /&gt;&#10;    &lt;path&#10;        android:fillColor=&quot;#00000000&quot;&#10;        android:pathData=&quot;M3,12L21,12&quot;&#10;        android:strokeWidth=&quot;2&quot;&#10;        android:strokeColor=&quot;#FEFEFE&quot;&#10;        /&gt;&#10;&lt;/vector&gt;&#10;" />
              <option name="updatedContent" value="&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&#10;    &gt;&#10;    &lt;path&#10;        android:fillColor=&quot;#00000000&quot;&#10;        android:pathData=&quot;M12,3L12,21&quot;&#10;        android:strokeWidth=&quot;2&quot;&#10;        android:strokeColor=&quot;#FEFEFE&quot;&#10;        android:strokeLineCap=&quot;round&quot;&#10;        /&gt;&#10;    &lt;path&#10;        android:fillColor=&quot;#00000000&quot;&#10;        android:pathData=&quot;M3,12L21,12&quot;&#10;        android:strokeWidth=&quot;2&quot;&#10;        android:strokeColor=&quot;#FEFEFE&quot;&#10;        android:strokeLineCap=&quot;round&quot;&#10;        /&gt;&#10;&lt;/vector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>